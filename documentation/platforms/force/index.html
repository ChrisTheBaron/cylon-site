<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.0 Transitional//EN" "http://www.w3.org/TR/REC-html40/loose.dtd">
<html>
  <head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
    <meta charset="utf-8">
    <meta content="width=device-width, initial-scale=1.0" name="viewport">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="description">
    <meta content="The Hybrid Group" name="author">
    <title>Force with Cylon.js</title>
    <link href="/stylesheets/style.css" rel="stylesheet">
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.9.1/jquery.min.js"></script>
    <script src="/hybridpages/assets/javascript/accordion.js"></script>
    <script src="/hybridpages/assets/javascript/plax.js"></script>
    <script src="/hybridpages/assets/javascript/subnav.js"></script>
    <script src="/javascripts/parallax_bottom.js"></script>
    <link href="//fonts.googleapis.com/css?family=Inconsolata:400,700%7CMontserrat:700" rel="stylesheet">
    <link href="/favicon.ico" rel="shortcut icon" type="image/gif">
  <script type="text/javascript">


  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-46433484-2', {"cookieDomain":"cylonjs.com"});
















   ga('send', 'pageview');


</script></head>
  <body>
    
    <div class="app">
      <div id="top-header">
        <div class="back-index-top">
          <div class="container-hero section-nav">
            <div class="w">
              <header class="app-header" role="banner">
                <div class="display">
                  <h1 class="app-logo">
                    <a href="/">Cylon</a>
                  </h1>
                  <span class="subtitle">
                    <div class="main"></div>
                  </span>
                </div>
                <span class="menu">
                  <a href="/documentation" class="item">Docs</a>
                  <a class="active" href="/documentation/platforms">Platforms</a>
                  <a href="/resources" class="item">Resources</a>
                  <a href="/blog" class="item">Blog</a>
                  <a class="item" target="_blank" href="https://github.com/hybridgroup/cylon/">Github</a>
                </span>
              </header>
            </div>
          </div>
        </div>
      </div>
      <div class="container">
        <div class="main" role="main">
          <section class="content full">
            <div class="documentation">
              <div class="side-documentation">
                <div class="mobile-menu">
                  <a href="#" id="menu-docs">
                    <div class="line"></div>
                    <div class="line"></div>
                    <div class="line"></div>
                  </a>
                </div>
                <dl class="accordion-docs hide">
                  <h5 class="doc-button">
                    <a href="/documentation">Docs</a>
                  </h5>
                  <span></span>
                  <dt>
                    <a href="">Getting Started</a>
                  </dt>
                  <dd id="getting-panel">
                    <ul>
                      <li>
                        <a href="/documentation/getting-started">Setup your environment</a>
                      </li>
                    </ul>
                  </dd>
                  <dt>
                    <a href="">Guides</a>
                  </dt>
                  <dd id="guides-panel">
                    <ul>
                      <li>
                        <a href="/documentation/guides/what_is_cylon">
                          About Cylon
                        </a>
                      </li>
                      <li>
                        <a href="/documentation/guides/working-with-robots">
                          Working With Robots
                        </a>
                      </li>
                      <li>
                        <a href="/documentation/guides/api">
                          API
                        </a>
                      </li>
                      <li>
                        <a href="/documentation/guides/cli">
                          CLI
                        </a>
                      </li>
                      <li>
                        <a href="/documentation/guides/test-driven-robotics">Test Driven Robotics</a>
                      </li>
                      <li>
                        <a href="/documentation/guides/helpers">Helper Methods</a>
                      </li>
                    </ul>
                  </dd>
                  <dt>
                    <a href="">Platforms</a>
                  </dt>
                  <dd id="platform-panel">
                    <ul>
                      <li>
                        <a href="/documentation/platforms/ardrone">Ardrone</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/arduino">Arduino</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/yun">Arduino Yun</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/audio">Audio</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/beaglebone">Beaglebone</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/crazyflie">Crazyflie</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/digispark">Digispark</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/force">Force</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/galileo">Intel Galileo</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/joystick">Joystick</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/keyboard">Keyboard</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/leapmotion">Leap Motion</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/nest">Nest</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/neurosky">Neurosky Mindware</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/opencv">OpenCV</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/pebble">Pebble</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/pinoccio">Pinoccio</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/rapiro">Rapiro</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/raspberry-pi">Raspberry Pi</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/skynet">Skynet</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/spark">Spark</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/sphero">Sphero</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/speech">Speech</a>
                      </li>
                      <li>
                        <a href="/documentation/platforms/tessel">Tessel</a>
                      </li>
                    </ul>
                  </dd>
                  <dt>
                    <a href="">Drivers</a>
                  </dt>
                  <dd id="driver-panel">
                    GPIO
                    <ul id="gpio">
                      <li>
                        <a href="/documentation/drivers/analog-sensor">Analog Sensor</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/button">Button</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/continuous-servo">Continuos Servo</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/direct-pin">Direct Pin</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/ir-range-finder">Sharp IR Proximity Sensor</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/led">LED</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/makey-button">Makey Button</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/maxbotix">Maxbotix</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/motor">Motor</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/servo">Servo</a>
                      </li>
                    </ul>
                    I2C
                    <ul id="i2c">
                      <li>
                        <a href="/documentation/drivers/blinkm">Blinkm</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/bmp180">BPM180</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/hmc6352-compass">HMC6352 Compass</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/lcd">LCD</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/mpl115a2">MPL115A2</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/mpu6050">MPU6050</a>
                      </li>
                    </ul>
                    ARDrone
                    <ul id="ardrone">
                      <li>
                        <a href="/documentation/drivers/ardrone">Ardrone Flight</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/ardrone-navigation">Ardrone Navigation</a>
                      </li>
                    </ul>
                    Crazyflie
                    <ul id="crazyflie">
                      <li>
                        <a href="/documentation/drivers/crazyflie">Crazyflie Flight</a>
                      </li>
                    </ul>
                    Force
                    <ul id="force">
                      <li>
                        <a href="/documentation/drivers/force">Force</a>
                      </li>
                    </ul>
                    Joystick
                    <ul id="joystick">
                      <li>
                        <a href="/documentation/drivers/dualshock">Dualshock3 Controller</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/xbox360">XBox360 Controller</a>
                      </li>
                    </ul>
                    Other Drivers
                    <ul id="others">
                      <li>
                        <a href="/documentation/drivers/keyboard">Keyboard</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/leapmotion">Leap Motion</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/nest_thermostat">Nest Thermostat</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/nest_home">Nest Home</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/neurosky">Neurosky Mindware</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/pebble">Pebble</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/rapiro">Rapiro</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/skynet">Skynet</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/sphero">Sphero</a>
                      </li>
                    </ul>
                    Pinoccio Drivers
                    <ul id="pinoccio">
                      <li>
                        <a href="/documentation/drivers/pinoccio_led">Pinoccio LED</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/pinoccio_power">Pinoccio Power</a>
                      </li>
                    </ul>
                    Tessel Modules
                    <ul id="tessel">
                      <li>
                        <a href="/documentation/drivers/tessel_accelerometer">Tessel Accelerometer</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/tessel_ambient">Tessel Ambient</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/tessel_audio">Tessel Audio</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/tessel_bluetooth">Tessel Bluetooth</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/tessel_camera">Tessel Camera</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/tessel_climate">Tessel Climate</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/tessel_gps">Tessel GPS</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/tessel_infrared">Tessel Infrared</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/tessel_relay">Tessel Relay</a>
                      </li>
                      <li>
                        <a href="/documentation/drivers/tessel_servo">Tessel Servo</a>
                      </li>
                    </ul>
                  </dd>
                  <dt>
                    <a href="">Contribute</a>
                  </dt>
                  <dd id="contribute-panel">
                    <ul>
                      <li>
                        <a href="/documentation/contribute/guidelines">Guidelines</a>
                      </li>
                      <li>
                        <a href="/documentation/contribute/contact-us">Contact us</a>
                      </li>
                    </ul>
                  </dd>
                  <dt>
                    <a href="">Examples</a>
                  </dt>
                  <dd id="example-panel">
                    <ul>
                      <li>
                        <a href="/documentation/examples">All examples</a>
                      </li>
                    </ul>
                  </dd>
                  <dt>
                    <a href="">Tutorials</a>
                  </dt>
                  <dd id="tutorial-panel">
                    <ul>
                      <li>
                        <a href="/documentation/tutorials">Workshop</a>
                      </li>
                    </ul>
                  </dd>
                  <dt>
                    <a href="">Live Chat</a>
                  </dt>
                  <dd id="chat-panel">
                    <ul>
                      <li>
                        <a href="/documentation/chat">IRC</a>
                      </li>
                    </ul>
                  </dd>
                </dl>
                <script>
                    $(document).ready(function(){
                      $("#menu-docs").click(function(){
                        $(".accordion-docs").toggleClass("hide");
                        $(this).addClass("active");
                      });
                    });
                </script>
                <script>
                  $("#platform-panel").addClass("active-panel");
                  $("#platform-panel ul li:nth-child(8)").addClass("active-link");
                </script>
              </div>
              <div class="container-documentation">
                <div class="page-title-docs">
                  <div class="w">
                    <h1 class="title">Force</h1>
                  </div>
                </div>
                <section class="subnav-drivers" id="mainsubnav">
                  <div class="container">
                    <h5>Force</h5>
                    <nav>
                      <a href="#HowToInstall">How To Install</a>
                      <a href="#HowToUse">How To Use</a>
                      <a href="#HowToConnect">How To Connect</a>
                      <a href="#Drivers">Drivers</a>
                      <a href="#top">Top</a>
                    </nav>
                  </div>
                </section>
                <br>
                <section class="intro">
                  <img class="display" src="/images/devices/force.jpg">
                  <div class="info-intro">
                    <h4 class="subtitle">
<a href="https://github.com/hybridgroup/cylon-force" class="repository">Repository</a>| <a class href="https://github.com/hybridgroup/cylon-force/issues">Issues</a>
</h4>
                    <p>This modules provides an adaptor + driver combination for communicating with the SalesForce Force.com platform.</p>
                    
                    <p>It uses the <a href="https://github.com/kevinohara80/nforce">nforce</a> module created by @kevinohara80.</p>
                    
                    <p>For more info about the Force platform, click <a href="http://www.salesforce.com/platform/overview/">here</a>.</p>
                  </div>
                  <div class="clear"></div>
                </section>
                <section class="how-to" id="HowToInstall">
                  <h2 id="how-to-install">How To Install</h2>
                  
                  <pre class="CodeRay">$ npm install cylon-force
</pre>
                </section>
                <section class="how-to" id="HowToUse">
                  <h2 id="how-to-use">How To Use</h2>
                  
                  <pre class="CodeRay"><span class="keyword">var</span> Cylon = require(<span class="string"><span class="delimiter">'</span><span class="content">cylon</span><span class="delimiter">'</span></span>);

Cylon.robot({
  <span class="key">connection</span>: {
    <span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">sfcon</span><span class="delimiter">'</span></span>,
    <span class="key">adaptor</span>: <span class="string"><span class="delimiter">'</span><span class="content">force</span><span class="delimiter">'</span></span>,
    <span class="key">sfuser</span>: process.env.SF_USERNAME,
    <span class="key">sfpass</span>: process.env.SF_SECURITY_TOKEN
  },

  <span class="key">device</span>: {<span class="key">name</span>: <span class="string"><span class="delimiter">'</span><span class="content">salesforce</span><span class="delimiter">'</span></span>, <span class="key">driver</span>: <span class="string"><span class="delimiter">'</span><span class="content">force</span><span class="delimiter">'</span></span>},

  <span class="function">work</span>: <span class="keyword">function</span>(me) {
    me.salesforce.subscribe(<span class="string"><span class="delimiter">'</span><span class="content">SpheroMsgOutbound</span><span class="delimiter">'</span></span>, <span class="keyword">function</span>(data) {
      console.log(data);
    });

    <span class="keyword">var</span> i = <span class="integer">0</span> ;
    every((<span class="integer">2</span>).seconds(), <span class="keyword">function</span>() {
      <span class="keyword">var</span> toSend = {<span class="key">spheroName</span>: <span class="string"><span class="delimiter">'</span><span class="content">globo</span><span class="delimiter">'</span></span>, <span class="key">bucks</span>: <span class="integer">1</span>}
      me.salesforce.push(<span class="string"><span class="delimiter">'</span><span class="content">/SpheroController/</span><span class="delimiter">'</span></span>, toSend);
    });
  }
});

Cylon.start();
</pre>
                </section>
                <section class="how-to" id="HowToConnect">
                  <h2 id="how-to-connect">How To Connect</h2>
                  
                  <h3 id="salesforce-setup">SalesForce Setup</h3>
                  
                  <p>First, you'll need an account on DeveloperForce.
                  If you don't have one already, you can create one <a href="http://developer.force.com/join">here</a>.</p>
                  
                  <p>Next, you'll need to configure a connected app in your developer profile.
                  This needs to be done to retrieve the necessary keys, tokens, and URLs necessary to connect your robot to SalesForce.</p>
                  
                  <p>Here's the steps to do this:</p>
                  
                  <ol>
                    <li>Go to Setup (top) -&gt; Create (side) -&gt; Apps -&gt; Connected Apps (scroll down) -&gt; New</li>
                    <li>Check "Enable OAuth Settings"</li>
                    <li>Next, add all permissions. Use <code>http://localhost:3000/oauth/_callback</code> as your callback URL.</li>
                  </ol>
                  
                  <p>You'll be using the Oauth2 web server flow, so you need your personal security code.
                  If you don't have one, go to your Profile and click reset security token and Salesforce should email it to you.</p>
                  
                  <p>To get this:</p>
                  
                  <ol>
                    <li>Setup -&gt; My Personal Information -&gt; Reset My Security Code.</li>
                  </ol>
                  
                  <p>You'll need your password and security token to login (<code>passwordSECURITYCODE</code> concatenated, no space).</p>
                  
                  <p>We've created a SalesForce package that installs the Sphero_Message object and the apexRest class for you to speed things up.
                  You can find it <a href="https://login.salesforce.com/packaging/installPackage.apexp?p0=04ti00000004IoN">here</a>.</p>
                  
                  <p>Now, we'll need to setup a custom object for streaming communication.
                  In this example we'll create a new object and call it 'Sphero_Message': We also add two custom fields to this object: 'Sphero_Name' and 'Bucks'.</p>
                  
                  <ol>
                    <li>Go to Setup -&gt; Create -&gt; Object -&gt; New</li>
                    <li>Call it "Sphero_Message"</li>
                    <li>Create custom attributes "Sphero_Name" and "Bucks", both of them should be the text type.</li>
                  </ol>
                  
                  <p>Next, we need to setup apexRest code, so we can create new objects using the REST API:</p>
                  
                  <ol>
                    <li>Go click My Profile -&gt; Developer Console.</li>
                    <li>When the console opens, click File -&gt; New -&gt; Apex Class</li>
                    <li>Add the following code:</li>
                  </ol>
                  
                  <p><br></p>
                  
                  <pre class="CodeRay">@RestResource(urlMapping='/SpheroController/*')
global with sharing class SpheroController {
  @HttpPost
    global static void create(String spheroName, String bucks) {
      SpheroController.handleSpheroMessage(spheroName, bucks)
    }

  public static void handleSpheroMessage(String spheroName, String bucks) {
    Sphero_Message__c sm = new Sphero_Message__c();
    sm.Sphero_Name__c = spheroName;
    sm.Bucks__c = bucks;
    insert sm;
  }
}
</pre>
                  
                  <p>To be able to stream, we need a PushTopic to connect to.</p>
                  
                  <ol>
                    <li>Go to Developer Console -&gt; Debug -&gt; Open Execute Anonymous Code</li>
                    <li>Add the following code to create the new PushTopic with the query you want to execute, and the events you wish it to report:</li>
                  </ol>
                  
                  <p><br></p>
                  
                  <pre class="CodeRay">PushTopic pt = new PushTopic();
pt.apiversion = 28.0;
pt.name = 'SpheroMsgOutbound'; pt.description = 'All new Sphero Message records';
pt.query = 'SELECT Id, Name, Sphero_Name__c, Bucks__c FROM Sphero_Message__c';
insert pt;
System.debug('Created new PushTopic: '+ pt.Id);
</pre>
                  
                  <p>At this point, everything on the SalesForce end should be ready.
                  We should now be able to connect, authenticate, push/create records through apexRest, and stream information using the pushTopic.</p>
                </section>
                <section class="drivers" id="Drivers">
                  <h2 id="drivers">Drivers</h2>
                  
                  <p>All Cylon.js drivers listed below should work with the Force:</p>
                  <div class="hardware">
                    <div class="devices">
                      <a class="device" href="/documentation/drivers/force" title="Force">
                        <img src="/images/devices/force.jpg">
                      </a>
                    </div>
                  </div>
                </section>
              </div>
            </div>
          </section>
        </div>
      </div>
    </div>
    <div class="app-footer">
      <div class="frameworks">
        <div class="parallax-container">
          <div class="background-footer parallax-bottom"></div>
        </div>
        <div class="container">
          <div class="column-footer">
            <div class="img">
              <img src="/images/elements/logo-cylon-2x.png">
            </div>
            <h4>Multiple solutions</h4>
            <p>Cylon provides a simple, yet powerful way to create solutions that incorporate multiple, different hardware devices at the same time.</p>
          </div>
          <div class="column-footer">
            <div class="img">
              <img src="/images/elements/logo-artoo-2x.png">
            </div>
            <h4>Artoo</h4>
            <p>Want to use Ruby on robots? Check out our sister project Artoo</p>
            <div class="button">
              <a target="blank" href="http://artoo.io">View Project</a>
            </div>
          </div>
          <div class="column-footer">
            <div class="img">
              <img src="/images/elements/logo-gobot-2x.png">
            </div>
            <h4>Gobot</h4>
            <p>Want to use the Go programming language to power your robots? Check out our sister project Gobot</p>
            <div class="button">
              <a target="blank" href="http://gobot.io">View Project</a>
            </div>
          </div>
          <div class="clear"></div>
        </div>
      </div>
      <div class="copyright">
        <div class="container">
          <div class="left-side">
            <span>© Copyright 2012-2014</span>
            <a href="http://hybridgroup.com" id="THG-logo" target="_blank">
              <img alt="The Hybrid Group" src="/images/elements/THG_logo.png">
            </a>
          </div>
          <div class="right-side">
            <a href="#top">
              <img alt="Top" src="/images/elements/triangle_up.svg">
              <p>Top</p>
            </a>
          </div>
          <div class="clear"></div>
        </div>
      </div>
    </div>
  </body>
</html>
